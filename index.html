<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CueTube Fresh Start</title>
<style>
  body {
    margin: 0;
    background: #000;
    overflow: hidden;
    font-family: Arial, sans-serif;
  }
  /* Main YouTube Screen */
  #main {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    display: flex; align-items: center; justify-content: center;
    background: #111;
  }
  #ytplayer {
    width: 100%; height: 100%;
    border: none;
    box-shadow: 0 0 40px rgba(255,0,0,0.4);
  }
  /* YouTube Button */
  #ytButton {
    position: fixed;
    top: 15px; right: 15px;
    width: 60px; height: 60px;
    border-radius: 50%;
    background: red;
    display: flex; align-items: center; justify-content: center;
    cursor: pointer; transition: opacity 0.4s;
    z-index: 1001;
  }
  #ytButton.dim { opacity: 0.3; }
  #ytButton:before {
    content: "";
    border-style: solid;
    border-width: 12px 0 12px 20px;
    border-color: transparent transparent transparent white;
    margin-left: 5px;
  }
  /* Overlay */
  #overlay {
    position: fixed; top:0; left:0; width:100%; height:100%;
    background: rgba(0,0,0,0.4);
    display: none; z-index:1000;
  }
  #overlay.active { display: block; }
  /* Drawers */
  .drawer {
    position: fixed; background: #222; color: #fff;
    box-shadow: 0 0 20px rgba(0,0,0,0.8);
    transition: transform 0.3s;
    z-index: 1002;
    padding: 15px;
  }
  #leftDrawer {
    top: 0; left: 0; height: 100%; width: 250px;
    transform: translateX(-100%);
  }
  #leftDrawer.open { transform: translateX(0); }
  #bottomDrawer {
    left: 0; bottom: 0; width: 100%; height: 250px;
    transform: translateY(100%);
  }
  #bottomDrawer.open { transform: translateY(0); }
  /* Drawer Handles */
  .handle {
    position: fixed; background: rgba(255,255,255,0.1);
    border-radius: 10px; cursor: pointer; z-index:1003;
    transition: background 0.3s;
  }
  .handle:hover { background: rgba(255,255,255,0.3); }
  #handleLeft {
    top: 50%; left: 0;
    transform: translateY(-50%);
    width: 20px; height: 60px;
  }
  #handleBottom {
    left: 50%; bottom: 0;
    transform: translateX(-50%);
    width: 60px; height: 20px;
  }
</style>
</head>
<body>
  <!-- Main YouTube Screen -->
  <div id="main">
    <iframe id="ytplayer" src="https://www.youtube.com/embed/" allowfullscreen></iframe>
  </div>

  <!-- YouTube Button -->
  <div id="ytButton"></div>

  <!-- Drawers -->
  <div id="leftDrawer" class="drawer">
    <h2>Left Drawer</h2>
    <p>Navigation or links here.</p>
  </div>
  <div id="bottomDrawer" class="drawer">
    <h2>Bottom Drawer</h2>
    <p>Quick actions or options here.</p>
  </div>

  <!-- Handles -->
  <div id="handleLeft" class="handle"></div>
  <div id="handleBottom" class="handle"></div>

  <!-- Overlay -->
  <div id="overlay"></div>

<script>
const overlay = document.getElementById('overlay');
const leftDrawer = document.getElementById('leftDrawer');
const bottomDrawer = document.getElementById('bottomDrawer');
const handleLeft = document.getElementById('handleLeft');
const handleBottom = document.getElementById('handleBottom');
const ytButton = document.getElementById('ytButton');
let ytTimeout;
let ytPopup = null;

/* Drawer Functions */
function closeAll(){
  [leftDrawer,bottomDrawer].forEach(d=>d.classList.remove('open'));
  [handleLeft,handleBottom].forEach(h=>h.classList.remove('active'));
  overlay.classList.remove('active');
  handleLeft.style.display='block'; handleBottom.style.display='block';
}
function toggleDrawer(drawer,handle,forceOpen=null){
  const isOpen=drawer.classList.contains('open');
  if(forceOpen===false){ 
    drawer.classList.remove('open'); 
    handle.classList.remove('active'); 
    overlay.classList.remove('active'); 
    handleLeft.style.display='block'; 
    handleBottom.style.display='block'; 
    return; 
  }
  closeAll();
  if(!isOpen || forceOpen===true){
    drawer.classList.add('open'); handle.classList.add('active'); overlay.classList.add('active');
    if(handle===handleLeft) handleBottom.style.display='none';
    if(handle===handleBottom) handleLeft.style.display='none';
  }
}
handleLeft.addEventListener('click',()=>toggleDrawer(leftDrawer,handleLeft));
handleBottom.addEventListener('click',()=>toggleDrawer(bottomDrawer,handleBottom));
overlay.addEventListener('click',closeAll);

/* YT Popup Function */
ytButton.addEventListener('click',()=>{
  if(ytPopup && !ytPopup.closed){
    ytPopup.focus();
  } else {
    const w = Math.floor(window.screen.width/2);
    const h = window.screen.height;
    const left = window.screen.width - w;
    ytPopup = window.open(
      "https://www.youtube.com/results?search_query=karaoke",
      "karaokePopup",
      `width=${w},height=${h},left=${left},top=0,resizable=yes,scrollbars=yes`
    );
  }
});

/* Dim Button on idle */
function resetYTButtonTimer(){
  clearTimeout(ytTimeout);
  ytButton.classList.remove('dim');
  ytTimeout=setTimeout(()=>{ytButton.classList.add('dim');},5000);
}
['mousemove','touchstart'].forEach(ev=>document.addEventListener(ev,resetYTButtonTimer));
resetYTButtonTimer();

/* Keyboard Shortcuts */
document.addEventListener('keydown',e=>{
  if(leftDrawer.classList.contains('open') && e.key==='ArrowDown') return;
  if(bottomDrawer.classList.contains('open') && e.key==='ArrowLeft') return;
  if(e.key==='ArrowUp') toggleDrawer(bottomDrawer,handleBottom,true);
  if(e.key==='ArrowDown') toggleDrawer(bottomDrawer,handleBottom,false);
  if(e.key==='ArrowRight') toggleDrawer(leftDrawer,handleLeft,true);
  if(e.key==='ArrowLeft') toggleDrawer(leftDrawer,handleLeft,false);
  if(e.key==='Escape') closeAll();
});

/* ðŸ”¥ Swipe Gesture Support */
let touchStartX=0, touchStartY=0, touchEndX=0, touchEndY=0;

document.addEventListener('touchstart',e=>{
  touchStartX=e.changedTouches[0].screenX;
  touchStartY=e.changedTouches[0].screenY;
});

document.addEventListener('touchend',e=>{
  touchEndX=e.changedTouches[0].screenX;
  touchEndY=e.changedTouches[0].screenY;
  handleSwipe();
});

function handleSwipe(){
  let dx = touchEndX - touchStartX;
  let dy = touchEndY - touchStartY;

  // Left drawer: swipe right from edge
  if(touchStartX < 50 && dx > 80 && Math.abs(dy) < 60){
    toggleDrawer(leftDrawer,handleLeft,true);
  }
  // Close left drawer: swipe left
  else if(leftDrawer.classList.contains('open') && dx < -80 && Math.abs(dy) < 60){
    toggleDrawer(leftDrawer,handleLeft,false);
  }

  // Bottom drawer: swipe up from bottom edge
  if(touchStartY > window.innerHeight - 50 && dy < -80 && Math.abs(dx) < 60){
    toggleDrawer(bottomDrawer,handleBottom,true);
  }
  // Close bottom drawer: swipe down
  else if(bottomDrawer.classList.contains('open') && dy > 80 && Math.abs(dx) < 60){
    toggleDrawer(bottomDrawer,handleBottom,false);
  }
}
</script>
</body>
</html>
